!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.microbin=t():e.microbin=t()}(self,(()=>(()=>{"use strict";var e={607:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__await||function(e){return this instanceof a?(this.v=e,this):new a(e)},s=this&&this.__asyncGenerator||function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),o=[];return n={},s("next"),s("throw"),s("return",(function(e){return function(t){return Promise.resolve(t).then(e,l)}})),n[Symbol.asyncIterator]=function(){return this},n;function s(e,t){i[e]&&(n[e]=function(t){return new Promise((function(r,n){o.push([e,t,r,n])>1||c(e,t)}))},t&&(n[e]=t(n[e])))}function c(e,t){try{(r=i[e](t)).value instanceof a?Promise.resolve(r.value.v).then(u,l):f(o[0][2],r)}catch(e){f(o[0][3],e)}var r}function u(e){c("next",e)}function l(e){c("throw",e)}function f(e,t){e(t),o.shift(),o.length&&c(o[0][0],o[0][1])}},c=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,i,(t=e[r](t)).done,t.value)}))}}};Object.defineProperty(t,"__esModule",{value:!0}),t.loadAll=t.loadIter=t.load=t.loadsAll=t.loadsIter=t.loads=void 0;const u=r(371),l=r(521);function f(e,t=u.DEFAULT_MAGIC){return s(this,arguments,(function*(){const r=yield a((0,l.ArrayBufferReader)(e,t));for(let e=0;e<r.count;e++)yield yield a(yield a(r.read()))}))}function d(e,t=u.DEFAULT_MAGIC){return s(this,arguments,(function*(){const r=yield a((0,l.ReadableStreamReader)(e,t));for(let e=0;e<r.count;e++)yield yield a(yield a(r.read()))}))}i(r(371),t),i(r(521),t),i(r(58),t),t.loads=function(e,t=u.DEFAULT_MAGIC){return o(this,void 0,void 0,(function*(){const r=yield(0,l.ArrayBufferReader)(e,t);if(1!==r.count)throw new l.DecodeError("File contains more than one global object");return yield r.read()}))},t.loadsIter=f,t.loadsAll=function(e,t=u.DEFAULT_MAGIC){var r,n,i,a;return o(this,void 0,void 0,(function*(){const o=[];try{for(var s,u=!0,l=c(f(e,t));s=yield l.next(),!(r=s.done);u=!0){a=s.value,u=!1;const e=a;o.push(e)}}catch(e){n={error:e}}finally{try{u||r||!(i=l.return)||(yield i.call(l))}finally{if(n)throw n.error}}return o}))},t.load=function(e,t=u.DEFAULT_MAGIC){return o(this,void 0,void 0,(function*(){const r=yield(0,l.ReadableStreamReader)(e,t);if(1!==r.count)throw new l.DecodeError("File contains more than one global object");return yield r.read()}))},t.loadIter=d,t.loadAll=function(e,t=u.DEFAULT_MAGIC){var r,n,i,a;return o(this,void 0,void 0,(function*(){const o=[];try{for(var s,u=!0,l=c(d(e,t));s=yield l.next(),!(r=s.done);u=!0){a=s.value,u=!1;const e=a;o.push(e)}}catch(e){n={error:e}}finally{try{u||r||!(i=l.return)||(yield i.call(l))}finally{if(n)throw n.error}}return o}))}},521:function(e,t,r){var n,i,o,a,s,c,u,l,f=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},d=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},h=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.ReadableStreamReader=t.ArrayBufferReader=t.Reader=t.EOFError=t.DecodeError=void 0;const y=r(371);class v extends Error{constructor(e){super(e)}}t.DecodeError=v;class p extends v{constructor(){super("End of file")}}t.EOFError=p;class w{constructor(e,t=y.DEFAULT_MAGIC){n.add(this),i.set(this,0),o.set(this,0),a.set(this,void 0),s.set(this,void 0),c.set(this,0),"number"==typeof t&&(t=[t]),d(this,a,t,"f"),this.feeder=e}readHeader(){return f(this,void 0,void 0,(function*(){const e=yield h(this,n,"m",u).call(this,8);if(28002!==e.getUint16(0))throw new v("Invalid magic bytes");if(!h(this,a,"f").includes(e.getUint16(2)))throw new v("Invalid application magic bytes");if(0!==e.getUint8(4))throw new v("Unsupported version");d(this,o,e.getUint8(5),"f"),d(this,i,e.getUint16(6),"f")}))}get count(){return h(this,i,"f")}get flags(){return h(this,o,"f")}read(e=!0){return f(this,void 0,void 0,(function*(){const{type:t,value:r}=yield h(this,n,"m",l).call(this,e);switch(t){case y.Type.NONE:return null;case y.Type.FALSE:return!1;case y.Type.TRUE:return!0;case y.Type.FLOAT16:return(yield h(this,n,"m",u).call(this,2)).getFloat32(0);case y.Type.FLOAT32:return(yield h(this,n,"m",u).call(this,4)).getFloat32(0);case y.Type.FLOAT64:return(yield h(this,n,"m",u).call(this,8)).getFloat64(0);case y.Type.RATIONAL:throw new Error("Not implemented!");case y.Type.INT:return r;case y.Type.NINT:return-r;case y.Type.STRING:{const e=yield h(this,n,"m",u).call(this,r);return new TextDecoder("utf-8").decode(new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}case y.Type.BYTES:{const e=yield h(this,n,"m",u).call(this,r);return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}case y.Type.LIST:{const e=[];for(let t=0;t<r;t++)e.push(yield this.read(!1));return e}case y.Type.MAP:{const e=Object.create(null);for(let t=0;t<r;t++)e[yield this.read(!1)]=yield this.read(!1);return e}default:throw new Error("Internal error! Please, report a bug.")}}))}}t.Reader=w,i=new WeakMap,o=new WeakMap,a=new WeakMap,s=new WeakMap,c=new WeakMap,n=new WeakSet,u=function(e){return f(this,void 0,void 0,(function*(){if("number"!=typeof e)throw new v("64-bit offsets not supported");for(;void 0===h(this,s,"f")||h(this,c,"f")+e>h(this,s,"f").byteLength;){const{done:e,value:t}=yield this.feeder();if(e)throw new p;if(void 0===t)continue;if(void 0===h(this,s,"f")){d(this,s,t,"f"),d(this,c,0,"f");continue}const r=h(this,s,"f").byteLength-h(this,c,"f"),n=new Uint8Array(r+t.byteLength);n.set(h(this,s,"f").slice(h(this,c,"f"))),n.set(t,r),d(this,s,n,"f"),d(this,c,0,"f")}const t=h(this,c,"f");return d(this,c,h(this,c,"f")+e,"f"),new DataView(h(this,s,"f").buffer,h(this,s,"f").byteOffset+t,e)}))},l=function(e){var t;return f(this,void 0,void 0,(function*(){if(e){if(!h(this,i,"f"))throw new p;d(this,i,(t=h(this,i,"f"),--t),"f")}let r=(yield h(this,n,"m",u).call(this,1)).getUint8(0),o=r>>5;r&=31;let a=0;for(;5!=a&&r&1<<4-a;)a++;r&=(1<<5-a)-1,5==a&&(a=8);let s=yield h(this,n,"m",u).call(this,a);if(8==a)return{type:o,value:BigInt(r)<<BigInt(8*a)|s.getBigUint64(0)};switch(r<<=8*a,a){case 0:break;case 1:r|=s.getUint8(0);break;case 2:r|=s.getUint16(0);break;case 3:r|=s.getUint8(0)<<16|s.getUint16(1);break;case 4:r|=s.getUint32(0)}return o===y.Type.SPECIAL&&(o=16|r,r=0),{type:o,value:r}}))},t.ArrayBufferReader=function(e,t=y.DEFAULT_MAGIC){return f(this,void 0,void 0,(function*(){let r=!1;const n=new w((()=>f(this,void 0,void 0,(function*(){return r?{done:r,value:void 0}:(r=!0,{done:!1,value:new Uint8Array(e)})}))),t);return yield n.readHeader(),n}))},t.ReadableStreamReader=function(e,t=y.DEFAULT_MAGIC){return f(this,void 0,void 0,(function*(){const r=e.getReader(),n=new w((()=>r.read()),t);return yield n.readHeader(),n}))}},371:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Type=t.Flags=t.DEFAULT_MAGIC=void 0,t.DEFAULT_MAGIC=0,t.Flags={},t.Type={SPECIAL:0,RATIONAL:1,INT:4,NINT:2,STRING:3,BYTES:5,LIST:6,MAP:7,NONE:16,FALSE:17,TRUE:18,FLOAT16:19,FLOAT32:20,FLOAT64:21}},58:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Writer=void 0,t.Writer=class{}}},t={};return function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}(607)})()));
//# sourceMappingURL=microbin.1.0.0.min.js.map